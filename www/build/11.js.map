{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/components/components.module.ts","../../src/components/login-form/login-form.ts","../../src/components/register-form/register-form.ts","../../src/components/edit-profile-form/edit-profile-form.ts","../../src/pages/login/login.ts","../../src/components/profile-view/profile-view.ts","../../src/components/profile-search/profile-search.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\nimport { ComponentsModule } from \"../../components/components.module\";\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    ComponentsModule\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginFormComponent } from './login-form/login-form';\nimport { RegisterFormComponent } from './register-form/register-form';\nimport { EditProfileFormComponent } from './edit-profile-form/edit-profile-form';\nimport { ProfileViewComponent } from './profile-view/profile-view';\nimport { ProfileSearchComponent } from './profile-search/profile-search';\n\n@NgModule({\n  declarations: [\n    LoginFormComponent,\n    RegisterFormComponent,\n    EditProfileFormComponent,\n    ProfileViewComponent,\n    ProfileSearchComponent\n  ],\n  imports: [\n    IonicPageModule\n  ],\n  exports: [\n    LoginFormComponent,\n    RegisterFormComponent,\n    EditProfileFormComponent,\n    ProfileViewComponent,\n    ProfileSearchComponent\n  ]\n})\nexport class ComponentsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { Component, EventEmitter, Output } from '@angular/core';\n\nimport { Account } from './../../models/account/account.interface';\nimport { LoginResponse } from \"../../models/login/login-response.interface\";\nimport { NavController } from \"ionic-angular\";\nimport { AuthService } from \"../../providers/auth/auth.service\";\n\n/**\n * Generated class for the LoginFormComponent component.\n *\n * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html\n * for more info on Angular Components.\n */\n@Component({\n  selector: 'app-login-form',\n  templateUrl: 'login-form.html'\n})\nexport class LoginFormComponent {\n\n  account = {} as Account;\n\n  //On vas poser un écouteur sur le résultat de la méthode .auth.signInWithEmailAndPassword()\n  @Output() loginStatus: EventEmitter<LoginResponse>;\n\n  constructor(private navController: NavController,\n  private authService: AuthService) {\n    this.loginStatus = new EventEmitter<LoginResponse>();\n  }\n\n  async login(){\n      const result = await this.authService.signInWithEmailAndPassword(this.account)\n      this.loginStatus.emit(result);\n  }\n\n  navigateToRegisterPage(){\n    this.navController.push('RegisterPage')\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/login-form/login-form.ts","import { Component, Output, EventEmitter } from '@angular/core';\nimport { Account } from './../../models/account/account.interface';\nimport { AuthService } from \"../../providers/auth/auth.service\";\nimport { LoginResponse } from \"../../models/login/login-response.interface\";\n\n/**\n * Generated class for the RegisterFormComponent component.\n *\n * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html\n * for more info on Angular Components.\n */\n@Component({\n  selector: 'app-register-form',\n  templateUrl: 'register-form.html'\n})\nexport class RegisterFormComponent {\n\n  text: string;\n  account = {} as Account;\n  @Output() registerStatus: EventEmitter<LoginResponse>;\n\n  constructor(private authService: AuthService) {\n    // (!) Ne pas oublier après l'avoir typer plus haut de l'instancier\n    this.registerStatus = new EventEmitter<LoginResponse>();\n  }\n  async register(){\n    const result = await this.authService.createUserWithEmailAndPassword(this.account);\n    this.registerStatus.emit(result);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/register-form/register-form.ts","import { Component, OnDestroy, Output, EventEmitter } from '@angular/core';\nimport { Profile } from \"../../models/profile/profile.interface\";\nimport { AuthService } from \"../../providers/auth/auth.service\";\nimport { Subscription } from 'rxjs';\nimport { DataService } from \"../../providers/data/data.service\";\nimport { User } from 'firebase/app';\n/**\n * Generated class for the EditProfileFormComponent component.\n *\n * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html\n * for more info on Angular Components.\n */\n@Component({\n  selector: 'edit-profile-form',\n  templateUrl: 'edit-profile-form.html'\n})\nexport class EditProfileFormComponent implements OnDestroy{\n  ngOnDestroy(): void {\n    this.authentificateUser$.unsubscribe();\n  }\n  @Output() saveProfileResult: EventEmitter<Boolean>\n\n  text: string;\n  profile = {} as Profile;\n  //(!)\n  // Convention Style Guide de mettre un $ quand il cela concerne un observable\n  private authentificateUser$ : Subscription;\n  private authentificateUser : User;\n\n  constructor(private authService: AuthService, private dataService: DataService) {\n    this.saveProfileResult = new EventEmitter();\n    // (?) Je sais pas pourquoi je dois le stocker dans une variable de type Subscription\n    this.authentificateUser$ = this.authService.getAuthenticateUser().subscribe((user: User) => {\n      this.authentificateUser = user;\n    });\n\n  }\n\n  async saveProfile(){\n    if(this.authentificateUser){\n      this.profile.email = this.authentificateUser.email;\n      const result = await this.dataService.saveProfile(this.authentificateUser, this.profile);\n\n      // On signal dans l'application qu'un utilisateur a été enregistré\n      this.saveProfileResult.emit(result);\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/edit-profile-form/edit-profile-form.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, ToastController } from 'ionic-angular';\nimport { LoginResponse } from \"../../models/login/login-response.interface\";\nimport { DataService } from \"../../providers/data/data.service\";\nimport { User } from \"firebase/app\";\n\n/**\n * Generated class for the LoginPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\n  constructor(private dataService: DataService, private navCtrl: NavController,\n  private toastController: ToastController) {\n  }\n\n  login(event: LoginResponse){\n    console.log(\"Equipe d'intervention login() du batiment LoginPage avons bien reçu le signal :\", event);\n    // event peut être égale à deux reponse différentes => soit {result: S} soit {error: O}\n    if(!event.error){\n      this.toastController.create({\n        message: `Vous êtes connecté via ${event.result.email}`,\n        duration: 3000\n       }).present();\n\n       /**\n        * Au debut l'utilisateur se connecte avec son mail et son mots de passe - rien de plus, dans ce cas la on lui demande d'éditer son profile (nom, prenom ...)\n        * Si le profile existe deja on le redirige vers TabsPage, sinon on lui propose d'éditer son profil (pour avoir plus d'information)\n        */\n       this.dataService.getProfile(<User>event.result).subscribe(profile => {\n         console.log(\"profile\", profile);\n        profile.val() ? this.navCtrl.setRoot('TabsPage') : this.navCtrl.setRoot('EditProfilePage');\n       });\n\n    }else if (event.error){\n      this.toastController.create({\n        message: event.error.message,\n        duration: 3000\n       }).present();\n    }\n\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","import { Component, OnInit } from '@angular/core';\nimport { DataService } from \"../../providers/data/data.service\";\nimport { AuthService } from \"../../providers/auth/auth.service\";\nimport { User } from \"firebase/app\";\nimport { Profile } from \"../../models/profile/profile.interface\";\nimport { LoadingController, Loading } from \"ionic-angular\";\n\n/**\n * Generated class for the ProfileViewComponent component.\n *\n * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html\n * for more info on Angular Components.\n */\n@Component({\n  selector: 'app-profile-view',\n  templateUrl: 'profile-view.html'\n})\nexport class ProfileViewComponent implements OnInit{\n\n  text: string;\n  userProfile: Profile;\n  loader: Loading;\n\n  constructor(private dataService: DataService, private authService: AuthService, private loading: LoadingController) {\n    this.loader = this.loading.create({\n      content: \"Chargement du profile ...\"\n    });\n  }\n\n  ngOnInit(): void{\n    this.loader.present();\n    //Récupère l'utilisateur qui s'est connecté via son mail\n    this.authService.getAuthenticateUser().subscribe((user: User) => {\n      //Récupère le profile via l'url `/profiles/${user.uid}`\n      this.dataService.getProfile(user).subscribe((profile) =>{\n        this.userProfile = <Profile>profile.val();\n        this.loader.dismiss();\n      })\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/profile-view/profile-view.ts","import { Component } from '@angular/core';\nimport { DataService } from \"../../providers/data/data.service\";\nimport { Profile } from \"../../models/profile/profile.interface\";\n\n/**\n * Generated class for the ProfileSearchComponent component.\n *\n * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html\n * for more info on Angular Components.\n */\n@Component({\n  selector: 'app-profile-search',\n  templateUrl: 'profile-search.html'\n})\nexport class ProfileSearchComponent {\n\n  text: string;\n  query: string;\n  profileList: Profile[];\n\n  constructor(private dataService: DataService) {\n    console.log('Hello ProfileSearchComponent Component');\n    this.text = 'Hello ProfileSearchComponent';\n  }\n\n  searchUser(query: string){\n    this.dataService.searchUser(query).subscribe(profiles =>{\n      this.profileList = profiles\n      console.log(\"profileList\", this.profileList);\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/profile-search/profile-search.ts"],"sourceRoot":""}